<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of MatRad_MCsquareConfig</title>
  <meta name="keywords" content="MatRad_MCsquareConfig">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html matRad --><!-- menu.html MCsquare -->
<h1>MatRad_MCsquareConfig
</h1>

<h2><a name="_name"></a>Purpose <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"></div>

<h2><a name="_synopsis"></a>Synopsis <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box">This is a script file. </div>

<h2><a name="_description"></a>Description <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>Cross-reference information <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-type:disc">
<li><a href="MatRad_MCsquareConfig.html" class="code" title="">MatRad_MCsquareConfig</a>	</li></ul>
This function is called by:
<ul style="list-style-type:disc">
<li><a href="MatRad_MCsquareConfig.html" class="code" title="">MatRad_MCsquareConfig</a>	</li><li><a href="../../matRad/matRad_calcParticleDoseMC.html" class="code" title="function dij = matRad_calcParticleDoseMC(ct,stf,pln,cst,nCasePerBixel,calcDoseDirect)">matRad_calcParticleDoseMC</a>	matRad MCsqaure monte carlo photon dose calculation wrapper</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>Subfunctions <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-type:disc">
<li><a href="#_sub1" class="code">function obj = MatRad_MCsquareConfig()</a></li><li><a href="#_sub2" class="code">function write(obj,fid)</a></li></ul>

<h2><a name="_source"></a>Source code <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="MatRad_MCsquareConfig.html" class="code" title="">MatRad_MCsquareConfig</a>
0002 <span class="comment">% MatRad_MCsquareConfig class definition</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% References</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% Copyright 2019 the matRad development team.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% This file is part of the matRad project. It is subject to the license</span>
0012 <span class="comment">% terms in the LICENSE file found in the top-level directory of this</span>
0013 <span class="comment">% distribution and at https://github.com/e0404/matRad/LICENSES.txt. No part</span>
0014 <span class="comment">% of the matRad project, including this file, may be copied, modified,</span>
0015 <span class="comment">% propagated, or distributed except according to the terms contained in the</span>
0016 <span class="comment">% LICENSE file.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0019 
0020 
0021     
0022     properties       
0023         
0024         <span class="comment">%%% Simulation parameters:</span>
0025         Num_Threads   =    0;        <span class="comment">% Number of parallel calculation threads. Default: 0 = max available threads</span>
0026         RNG_Seed      =    0;        <span class="comment">% Seed for the random number generator (deterministic result only with single thread). Default: 0 = seed based on the time</span>
0027         Num_Primaries = 1e6;        <span class="comment">% Number of primary protons to simulate. Default: 1e7</span>
0028         E_Cut_Pro     =    0.5;        <span class="comment">% Energy cut (in MeV) below which heavy charged particles are locally absorbed. Default: 0.5</span>
0029         D_Max          =    0.2;        <span class="comment">% Maximum distance between two step (cm). Default: 0.2</span>
0030         Epsilon_Max   =    0.25;        <span class="comment">% Fractional energy loss (dE/T) per step. Default: 0.25</span>
0031         Te_Min          =    0.05;        <span class="comment">% Threshold energy (MeV) for the production of secondary electrons (currently locally absorbed). Default: 0.05</span>
0032         <span class="comment">% As a reference: 200 MeV protons can transfer a maximum energy of 0.5 MeV to ?-electrons which correspond to a range of 7 mm in lung tissues.</span>
0033         
0034         <span class="comment">%%% Input files</span>
0035         CT_File                     = <span class="string">'Patient.mhd'</span>;                <span class="comment">% Name of the CT file. Default: CT.mhd</span>
0036         HU_Density_Conversion_File    = <span class="string">'Scanners/matRad_water/HU_Density_Conversion.txt'</span>;    <span class="comment">% Name of the file containing HU to density conversion data. Default: HU_Density_Conversion.txt</span>
0037         HU_Material_Conversion_File    = <span class="string">'Scanners/matRad_water/HU_Material_Conversion.txt'</span>;    <span class="comment">% Name of the file containing HU to material conversion data. Default: HU_Material_Conversion.txt</span>
0038         BDL_Machine_Parameter_File  = <span class="string">'BDL/BDL_matrad.txt'</span>;            <span class="comment">% Name of the machine parameter file for the beam data library. Default: BDL.txt</span>
0039         BDL_Plan_File               = <span class="string">'PlanPencil.txt'</span>;            <span class="comment">% Name of the plan file for the beam data library. Default: Plan.txt</span>
0040         
0041         <span class="comment">%%% Physical parameters</span>
0042         Simulate_Nuclear_Interactions = true;     <span class="comment">% Enable/Disable the simulation of nuclear interactions. Default: True</span>
0043         Simulate_Secondary_Protons      = true;         <span class="comment">% Enable/Disable the simulation of secondary protons (emitted during nuclear interactions). Default: True</span>
0044         Simulate_Secondary_Deuterons  = true;        <span class="comment">% Enable/Disable the simulation of secondary deuterons (emitted during nuclear interactions). Default: True</span>
0045         Simulate_Secondary_Alphas     = true;           <span class="comment">% Enable/Disable the simulation of secondary alphas (emitted during nuclear interactions). Default: True</span>
0046         
0047         
0048         <span class="comment">%%% 4D simulation</span>
0049         fourD_Mode                = false;    <span class="comment">% Enable/Disable the 4D simulation mode. Default: False</span>
0050         fourD_Dose_Accumulation = false;        <span class="comment">% Enable/Disable the dose accumulation for all 4D-CT phases. Default: False</span>
0051         Field_type              = <span class="string">'Velocity'</span>;    <span class="comment">% Field type: Displacement or Velocity. Default: Velocity</span>
0052         Create_Ref_from_4DCT    = false;        <span class="comment">% Create the reference phase image from 4D CT images (True), or import the reference image (False). Default: False</span>
0053         Create_4DCT_from_Ref    = false;        <span class="comment">% Create 4D CT images by deforming the reference phase image (True), or import 4D CT images (False). Default: False</span>
0054         Dynamic_delivery        = false;        <span class="comment">% Enable/Disable simulation of dynamic delivery (interplay simulation). Default: False</span>
0055         Breathing_period        = 7.0;        <span class="comment">% Period (in seconds) of the breathing motion. Default: 7.0</span>
0056         
0057         
0058         <span class="comment">%%% Robustness simulation</span>
0059         Robustness_Mode            = false;     <span class="comment">% Enable/Disable the robustness verification mode. Default: False</span>
0060         <span class="comment">%Scenario_selection         = 'All'        % Method for scenario selection: All (simulate all combinations), Random (randomly sample scenarios). Default: All</span>
0061         Simulate_nominal_plan      = true;        <span class="comment">% Simulate the nominal plan (without any systematic or random uncertainty). Default: True</span>
0062         <span class="comment">%Systematic_Setup_Error     = [0.25 0.25 0.25];    % Systematic error for the patient setup along the XYZ axes (cm). Default: 0.25 0.25 0.25</span>
0063         <span class="comment">%Random_Setup_Error         = [0.1  0.1  0.1];    % Standard deviation of the patient random setup error along the XYZ axes (cm). Default: 0.1 0.1 0.1</span>
0064         <span class="comment">%Systematic_Range_Error     = 3.0;        % Systematic error in percent of the proton range (%). Default: 3.0</span>
0065         <span class="comment">%Systematic_Amplitude_Error = 5.0;        % Systematic error in percent of the breathing motion amplitude for 4D simulations. Default: 5.0</span>
0066         <span class="comment">%Random_Amplitude_Error        = 5.0;        % Random error in percent of the breathing motion amplitude for 4D simulations. Default: 5.0</span>
0067         <span class="comment">%Systematic_Period_Error    = 5.0;        % Systematic error in percent of the breathing motion period for simulations of interplay with dynamic delivery. Default: 5.0</span>
0068         <span class="comment">%Random_Period_Error        = 5.0;        % Random error in percent of the breathing motion period for simulations of interplay with dynamic delivery. Default: 5.0</span>
0069         
0070         
0071         <span class="comment">%%% Beamlet simulation</span>
0072         Beamlet_Mode            = false;     <span class="comment">% Enable/Disable the beamlet computation mode. Default: False</span>
0073         Beamlet_Parallelization = false;    <span class="comment">% Parallelization on beamlet level is sometimes faster for beamlet simulation. This requires more memory. Default: False</span>
0074         
0075         
0076         <span class="comment">%%% Output parameters</span>
0077         Output_Directory =  <span class="string">'MCsquareOutput'</span>;    <span class="comment">% Name of the output directory. Default: Outputs</span>
0078         
0079         Energy_ASCII_Output     = false;    <span class="comment">% Enable/Disable the output of Energy in ASCII format. Default: False</span>
0080         Energy_MHD_Output    = false;    <span class="comment">% Enable/Disable the output of Energy in MHD format. Default: False</span>
0081         Energy_Sparse_Output = false;    <span class="comment">% Enable/Disable the output of Energy in Sparse matrix format. Default: False</span>
0082         Dose_ASCII_Output     = false;    <span class="comment">% Enable/Disable the output of Dose in ASCII format. Default: False</span>
0083         Dose_MHD_Output         = true;    <span class="comment">% Enable/Disable the output of Dose in MHD format. Default: True</span>
0084         Dose_Sparse_Output     = true;    <span class="comment">% Enable/Disable the output of Dose in Sparse matrix format. Default: False</span>
0085         LET_ASCII_Output     = false;    <span class="comment">% Enable/Disable the output of LET in ASCII format. Default: False</span>
0086         LET_MHD_Output         = false;    <span class="comment">% Enable/Disable the output of LET in MHD format. Default: False</span>
0087         LET_Sparse_Output     = false;    <span class="comment">% Enable/Disable the output of LET in Sparse matrix format. Default: False</span>
0088         
0089         Densities_Output = false;    <span class="comment">% Enable/Disable the export of the density map (converted from the CT image). Default: False</span>
0090         Materials_Output = false;    <span class="comment">% Enable/Disable the export of the map of materials (converted from the CT image). Default: False</span>
0091         
0092         Compute_DVH = false;    <span class="comment">% Enable/Disable the computation and export of DVH based on RT-Struct binary masks. Default: False</span>
0093         
0094         Dose_Sparse_Threshold    = 0;    <span class="comment">% The dose values above the threshold will be stored in the sparse matrix file. Default: 0</span>
0095         Energy_Sparse_Threshold    = 0;    <span class="comment">% The energy values above the threshold will be stored in the sparse matrix file. Default: 0</span>
0096         LET_Sparse_Threshold    = 0;    <span class="comment">% The LET values above the threshold will be stored in the sparse matrix file. Default: 0</span>
0097         
0098         Score_PromptGammas    = false;    <span class="comment">% Enable/Disable the scoring of Prompt Gammas (emitted during nuclear interactions). Default: False</span>
0099         PG_LowEnergyCut     = 0.0;    <span class="comment">% Disable the scoring of Prompt Gammas with energy below this value (MeV).  Default: 0.0</span>
0100         PG_HighEnergyCut    = 50.0;    <span class="comment">% Disable the scoring of Prompt Gammas with energy above this value (MeV).  Default: 50.0</span>
0101         <span class="comment">% Typical gamma camera would be sensitive between 3.0 and 6.0 MeV</span>
0102         PG_Spectrum_NumBin  = 150;    <span class="comment">% Number of bins to score the Prompt Gamma energy spectrum.  Default: 150</span>
0103         PG_Spectrum_Binning = 0.1;    <span class="comment">% Bin width (MeV) for the scoring of Prompt Gamma spectrum.  Default: 0.1</span>
0104         
0105         LET_Calculation_Method    = <span class="string">'StopPow'</span>; <span class="comment">% Select the method employed for the calculation of LET (DepositedEnergy, StopPow). Default: StopPow</span>
0106         
0107         <span class="comment">%Export_Beam_dose         = 'Disabled' % Export dose distribution for each beam (Enable) or entire plan (Disable). Default: Disable</span>
0108         Dose_to_Water_conversion = <span class="string">'Disabled'</span>; <span class="comment">% Select the method employed to convert simulation results (dose to medium) to dose to water (Disabled, PostProcessing, OnlineSPR). Default: Disabled</span>
0109         
0110         Dose_Segmentation                  = false;    <span class="comment">% Enable/Disable a segmentation of the dose map based on a density thresholding (remove dose artifacts in the air). Default: False</span>
0111         Density_Threshold_for_Segmentation = 0.01;    <span class="comment">% Density threshold employed for the segmentation (in g/cm3). Default: 0.01</span>
0112     <span class="keyword">end</span>
0113     
0114     methods
0115         <a name="_sub0" href="#_subfunctions" class="code">function obj = MatRad_MCsquareConfig()</a>
0116             <span class="comment">%UNTITLED Construct an instance of this class</span>
0117             <span class="comment">%   Detailed explanation goes here</span>
0118             <span class="comment">%obj.Property1 = inputArg1 + inputArg2;</span>
0119         <span class="keyword">end</span>
0120         
0121         <a name="_sub1" href="#_subfunctions" class="code">function write(obj,fid)</a>
0122            
0123             MCsquareProperties = fieldnames(obj);
0124             
0125             logicalString = {<span class="string">'False'</span>, <span class="string">'True'</span>};
0126 
0127             <span class="keyword">for</span> i = 1:numel(MCsquareProperties)
0128                 
0129                 <span class="comment">% modify fieldnames beginning with &quot;4D&quot;</span>
0130                 <span class="keyword">if</span> strncmp(MCsquareProperties{i},<span class="string">'fourD'</span>,5)
0131                     writeString = [<span class="string">'4D'</span> MCsquareProperties{i}(6:end)];
0132                 <span class="keyword">else</span>
0133                     writeString = MCsquareProperties{i};
0134                 <span class="keyword">end</span>
0135 
0136                 <span class="keyword">if</span> isa(obj.(MCsquareProperties{i}),<span class="string">'logical'</span>)
0137                     fprintf(fid,[writeString <span class="string">' '</span> logicalString{obj.(MCsquareProperties{i})+1} <span class="string">'\n'</span>]);
0138                 <span class="keyword">elseif</span> isa(obj.(MCsquareProperties{i}),<span class="string">'double'</span>)
0139                     fprintf(fid,[writeString <span class="string">' '</span> num2str(obj.(MCsquareProperties{i})) <span class="string">'\n'</span>]);
0140                 <span class="keyword">elseif</span> isa(obj.(MCsquareProperties{i}),<span class="string">'char'</span>)
0141                     fprintf(fid,[writeString <span class="string">' '</span> obj.(MCsquareProperties{i}) <span class="string">'\n'</span>]);
0142                 <span class="keyword">else</span>
0143                     error(<span class="string">'export not defined'</span>);
0144                 <span class="keyword">end</span>
0145 
0146             <span class="keyword">end</span>
0147             
0148         <span class="keyword">end</span>
0149         
0150     <span class="keyword">end</span>
0151 <span class="keyword">end</span>
0152</pre></div>
<hr><address><a href="https://e0404.github.io/matRad/" target="_parent"><img src="https://camo.githubusercontent.com/0a593ef6a04757c975b9f4634f6731ea0b019bbd/68747470733a2f2f7261776769742e636f6d2f77696b692f65303430342f6d61745261642f696d616765732f6d61747261645f626c616e6b2e737667" height="12px"/></a> | Generated by  <a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>
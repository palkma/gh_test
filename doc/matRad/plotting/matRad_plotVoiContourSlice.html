<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of matRad_plotVoiContourSlice</title>
  <meta name="keywords" content="matRad_plotVoiContourSlice">
  <meta name="description" content="matRad function that plots the contours of the segmentations given in cst">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html matRad --><!-- menu.html plotting -->
<h1>matRad_plotVoiContourSlice
</h1>

<h2><a name="_name"></a>Purpose <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box">matRad function that plots the contours of the segmentations given in cst</div>

<h2><a name="_synopsis"></a>Synopsis <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box">function [voiContourHandles] = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice,cMap,varargin) </div>

<h2><a name="_description"></a>Description <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> matRad function that plots the contours of the segmentations given in cst

 call
 voiContourHandles = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice) 
 voiContourHandles = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice,cMap) 
 voiContourHandles = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice,cMap,...) 

 input
   axesHandle          handle to axes the slice should be displayed in
   cst                 matRad cst cell array
   ct                  matRad ct structure
   ctIndex             index of the ct cube
   selection           logicals defining the current selection of contours
                       that should be plotted. Can be set to [] to plot
                       all non-ignored contours.
   plane               plane view (coronal=1,sagittal=2,axial=3)
   slice               slice in the selected plane of the 3D cube
   cMap                optional argument defining the colormap, default is
                       colorcube
   varargin            Additional Matlab Line-Property/value pairs

 output
   voiContourHandles:  handles of the plotted contours
   visibleOnSlice:     logicals defining if the contour is actually
                       visible on the current slice

 References
   -

 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 Copyright 2015 the matRad development team. 
 
 This file is part of the matRad project. It is subject to the license 
 terms in the LICENSE file found in the top-level directory of this 
 distribution and at https://github.com/e0404/matRad/LICENSES.txt. No part 
 of the matRad project, including this file, may be copied, modified, 
 propagated, or distributed except according to the terms contained in the 
 LICENSE file.

 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>Cross-reference information <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-type:disc">
<li><a href="../../matRad/tools/matRad_getEnvironment.html" class="code" title="function [env, versionString] = matRad_getEnvironment()">matRad_getEnvironment</a>	matRad function to get the software environment matRad is running on</li></ul>
This function is called by:
<ul style="list-style-type:disc">
<li><a href="../../matRad/matRadGUI.html" class="code" title="function varargout = matRadGUI(varargin)">matRadGUI</a>	matRad GUI</li><li><a href="../../matRad/tools/matRad_plotSliceWrapper.html" class="code" title="function [hCMap,hDose,hCt,hContour,hIsoDose] = matRad_plotSliceWrapper(axesHandle,ct,cst,cubeIdx,dose,plane,slice,thresh,alpha,contourColorMap,doseColorMap,doseWindow,doseIsoLevels,voiSelection,colorBarLabel,boolPlotLegend,varargin)">matRad_plotSliceWrapper</a>	matRad tool function to directly plot a complete slice of a ct with dose</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>Source code <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [voiContourHandles] = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice,cMap,varargin)</a>
0002 <span class="comment">% matRad function that plots the contours of the segmentations given in cst</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% call</span>
0005 <span class="comment">% voiContourHandles = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice)</span>
0006 <span class="comment">% voiContourHandles = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice,cMap)</span>
0007 <span class="comment">% voiContourHandles = matRad_plotVoiContourSlice(axesHandle,cst,ct,ctIndex,selection,plane,slice,cMap,...)</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% input</span>
0010 <span class="comment">%   axesHandle          handle to axes the slice should be displayed in</span>
0011 <span class="comment">%   cst                 matRad cst cell array</span>
0012 <span class="comment">%   ct                  matRad ct structure</span>
0013 <span class="comment">%   ctIndex             index of the ct cube</span>
0014 <span class="comment">%   selection           logicals defining the current selection of contours</span>
0015 <span class="comment">%                       that should be plotted. Can be set to [] to plot</span>
0016 <span class="comment">%                       all non-ignored contours.</span>
0017 <span class="comment">%   plane               plane view (coronal=1,sagittal=2,axial=3)</span>
0018 <span class="comment">%   slice               slice in the selected plane of the 3D cube</span>
0019 <span class="comment">%   cMap                optional argument defining the colormap, default is</span>
0020 <span class="comment">%                       colorcube</span>
0021 <span class="comment">%   varargin            Additional Matlab Line-Property/value pairs</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% output</span>
0024 <span class="comment">%   voiContourHandles:  handles of the plotted contours</span>
0025 <span class="comment">%   visibleOnSlice:     logicals defining if the contour is actually</span>
0026 <span class="comment">%                       visible on the current slice</span>
0027 <span class="comment">%</span>
0028 <span class="comment">% References</span>
0029 <span class="comment">%   -</span>
0030 <span class="comment">%</span>
0031 <span class="comment">% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0032 <span class="comment">%</span>
0033 <span class="comment">% Copyright 2015 the matRad development team.</span>
0034 <span class="comment">%</span>
0035 <span class="comment">% This file is part of the matRad project. It is subject to the license</span>
0036 <span class="comment">% terms in the LICENSE file found in the top-level directory of this</span>
0037 <span class="comment">% distribution and at https://github.com/e0404/matRad/LICENSES.txt. No part</span>
0038 <span class="comment">% of the matRad project, including this file, may be copied, modified,</span>
0039 <span class="comment">% propagated, or distributed except according to the terms contained in the</span>
0040 <span class="comment">% LICENSE file.</span>
0041 <span class="comment">%</span>
0042 <span class="comment">% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0043 
0044 [env, ~] = <a href="../../matRad/tools/matRad_getEnvironment.html" class="code" title="function [env, versionString] = matRad_getEnvironment()">matRad_getEnvironment</a>();
0045 
0046 <span class="comment">% overwrite colormap</span>
0047 <span class="keyword">if</span> exist(<span class="string">'cMap'</span>, <span class="string">'var'</span>) &amp;&amp; ~isempty(cMap)
0048     cMapScale = size(cMap,1)-1;
0049     <span class="comment">%determine colors</span>
0050     colors = cMap(round(linspace(1,cMapScale,size(cst,1))),:);
0051 <span class="keyword">else</span>
0052     <span class="keyword">for</span> i = 1:size(cst,1)
0053         <span class="keyword">if</span> isfield(cst{i,5},<span class="string">'visibleColor'</span>)
0054             colors(i,:) = cst{i,5}.visibleColor;
0055         <span class="keyword">else</span>
0056             colors(i,:) = [0 0 0];
0057         <span class="keyword">end</span>
0058     <span class="keyword">end</span>
0059 <span class="keyword">end</span>
0060 
0061 <span class="keyword">if</span> isempty(selection) || numel(selection) ~= size(cst,1)
0062     selection = true(size(cst,1),1);
0063 <span class="keyword">end</span>
0064 
0065 voiContourHandles = cell(0);
0066 <span class="keyword">switch</span> env
0067     <span class="keyword">case</span> <span class="string">'MATLAB'</span>
0068         voiContourHandles = gobjects(0);
0069     <span class="keyword">case</span> <span class="string">'OCTAVE'</span>
0070         voiContourHandles = [];
0071 <span class="keyword">end</span>
0072 
0073 
0074 <span class="keyword">for</span> s = 1:size(cst,1)
0075     
0076     <span class="keyword">if</span> ~strcmp(cst{s,3},<span class="string">'IGNORED'</span>) &amp;&amp; selection(s)
0077         <span class="comment">%Check for precalculated contours</span>
0078         C =[];
0079         <span class="keyword">if</span> size(cst,2) &gt;= 7 &amp;&amp; ~isempty(cst{s,7})
0080             C = cst{s,7}{slice,plane};
0081         <span class="keyword">else</span>
0082             <span class="comment">%If we do not have precomputed contours available, then compute them</span>
0083             mask = zeros(size(ct{ctIndex}));
0084             mask(cst{s,4}{ctIndex}) = 1;
0085             
0086             <span class="keyword">if</span> plane == 1 &amp;&amp; any(any(mask(slice,:,:) &gt; 0))
0087                 C = contourc(squeeze(mask(slice,:,:)),.5*[1 1]);
0088             <span class="keyword">elseif</span> plane == 2 &amp;&amp; any(any(mask(:,slice,:) &gt; 0))
0089                 C = contourc(squeeze(mask(:,slice,:)),.5*[1 1]);
0090             <span class="keyword">elseif</span> plane == 3 &amp;&amp; any(any(mask(:,:,slice) &gt; 0))
0091                 C = contourc(squeeze(mask(:,:,slice)),.5*[1 1]);
0092             <span class="keyword">end</span>  
0093         <span class="keyword">end</span>
0094         
0095         <span class="comment">% plot precalculated contourc data</span>
0096         
0097          <span class="keyword">switch</span> env
0098             <span class="keyword">case</span> <span class="string">'MATLAB'</span>
0099                 tmpLineHandle = gobjects(0);
0100             <span class="keyword">case</span> <span class="string">'OCTAVE'</span>
0101                 tmpLineHandle = [];
0102          <span class="keyword">end</span>
0103 
0104          <span class="keyword">if</span> any(C(:))
0105             lower = 1; <span class="comment">% lower marks the beginning of a section</span>
0106             <span class="keyword">while</span> lower-1 ~= size(C,2)
0107                 hold on
0108                 steps = C(2,lower); <span class="comment">% number of elements of current line section</span>
0109                 tmpLineHandle(end+1) = line(C(1,lower+1:lower+steps),<span class="keyword">...</span>
0110                     C(2,lower+1:lower+steps),<span class="keyword">...</span>
0111                     <span class="string">'Color'</span>,colors(s,:),<span class="string">'Parent'</span>,axesHandle,varargin{:});
0112 
0113                 lower = lower+steps+1;
0114             <span class="keyword">end</span>
0115             voiContourHandles{end+1} = tmpLineHandle;
0116          <span class="keyword">else</span>
0117             <span class="comment">% create empty line object</span>
0118             voiContourHandles{end+1} = {};
0119          <span class="keyword">end</span>     
0120 
0121                
0122     <span class="keyword">end</span>
0123 <span class="keyword">end</span>
0124 
0125 
0126 <span class="keyword">end</span></pre></div>
<hr><address><a href="https://e0404.github.io/matRad/" target="_parent"><img src="https://camo.githubusercontent.com/0a593ef6a04757c975b9f4634f6731ea0b019bbd/68747470733a2f2f7261776769742e636f6d2f77696b692f65303430342f6d61745261642f696d616765732f6d61747261645f626c616e6b2e737667" height="12px"/></a> | Generated by  <a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>